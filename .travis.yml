language: java
jdk:
- oraclejdk8
- openjdk11
- openjdk12
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
script:
- "./gradlew check"
- "./gradlew test"
- "./gradlew clean build"
- java -jar build/libs/httpserver.jar 5000 &
- "./acceptance-tests.sh"
deploy:
  provider: heroku
  api_key:
    secure: "lyD1CMYUaq1L2VJXCoI/cMYFaAON/I09/x+PxmVfyq3/0Ta49jBK06D3vyV0nVG0pkL/6CKmso3wlo3SDJP71H6sLqNMinLJCYAOrb0lZbYptoLSkJLgEhfH8uU3r2bX1TgJjxUJU/ge576HnMeP6keM6BLJvUojnJkHFIy6QInx0yblsIuN3Ws2cVkaPK93SkGsPccubQ+31Qy12OFTJZNJ4aVGXEeaOKzbrIeeiBEpxpvGO/JlKqzkh/IwnGOGTCmz5cctgVZybaTdimjJEs55kQae0KZO91KZQhlVne6F2+UjDiA9X8BI4M9XjakvXlvueB5P9llxcjjwCohR9+5KdHrEzGe2MDnuGPapOBiYz0k0RbhZZuYC+tV209VwFbJVn5mKo5hwLljGhtUWnuqzQatC27/wXcXBtWa/ZqYpSe8kBzEcf9ysYMerdIo2ujrl65LTiU0PLoWj2UMymAqyil9AAYdAcbrsrcJM2RgaCTm3THmtkFlcQwPQkP49EEaKg1PGgLntjqJXAFYzwJBinLioLLF0eyhUA5lZe7octbAwteNCM891ri1aeka6UUR+UqmOhpBOcTaOTUBWvxyZKW7jkkGUZo8Na5MmKs0hCyW++Z2PdRuTJU01f1C9E/cno+3e9zC0kD7QwkHgdLEgaB7AX7vv0VDKZtD3CCI="
  app: erversay
  on:
    repo: grace000/erversay
